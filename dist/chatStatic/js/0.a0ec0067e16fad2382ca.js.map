{"version":3,"sources":["webpack:///chatStatic/js/0.a0ec0067e16fad2382ca.js","webpack:///./src/components/modalMessage.vue","webpack:///modalMessage.vue","webpack:///./src/components/modalMessage.vue?d61b","webpack:///./src/components/modalMessage.vue?1cf2","webpack:///./src/components/modalMessage.vue?e4ae"],"names":["webpackJsonp","10","module","exports","__webpack_require__","Component","64","__webpack_exports__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1_vuex__","__WEBPACK_IMPORTED_MODULE_3__messageHandel__","component","resolve","e","then","__WEBPACK_AMD_REQUIRE_ARRAY__","apply","bind","this","catch","oe","scrollHeight","data","p","showModal","show","messagesLog","computed","i","user","state","dig","currentSession","currentSessionType","props","methods","content","_content","loadMroe","target","scrollTop","getMessage","type","$http","get","params","id","class","response","vm","unshift","reverse","$nextTick","$refs","scrollBox","scroll","offsetHeight","created","65","push","version","sources","names","mappings","file","sourcesContent","sourceRoot","68","locals","72","render","_vm","_h","$createElement","_c","_self","on","close","$event","$emit","slot","_v","ref","staticClass","directives","name","rawName","expression","_l","item","_s","timestamp","self","attrs","idt","width","height","src","img","avatar","domProps","innerHTML","_e","staticRenderFns"],"mappings":"AAAAA,cAAc,IAERC,GACA,SAAUC,EAAQC,EAASC,GCDjCA,EAAA,GAEA,IAAAC,GAAAD,EAAA,GAEAA,EAAA,IAEAA,EAAA,IAEA,kBAEA,KAGAF,GAAAC,QAAAE,EAAAF,SDUMG,GACA,SAAUJ,EAAQK,EAAqBH,GAE7C,YACAI,QAAOC,eAAeF,EAAqB,cAAgBG,OAAO,GAC7C,IAAIC,GAAoCP,EAAoB,GACxDQ,EAAqCR,EAAoB,GAEzDS,GAD6CT,EAAoB,IAClBA,EAAoB,GE5B5FO,GAAA,EAAAG,UAAA,sBAAAC,GFmCIX,EAAoBY,EAAe,GAAGC,KAAK,WAAa,GAAIC,IAAiCd,EAAoB,IEjCrHW,GFiCoII,MAAM,KAAMD,IEjChJE,KAAAC,OAAAC,MAAAlB,EAAAmB,KAEA,IAAAC,GAAA,CAEAjB,GAAA,SFmCIkB,KAAM,WACF,OACIC,EEjCZ,EFkCYC,UAAWN,KEjCvBO,KFkCYC,eACAL,aEhCZ,IFoCIM,SAAU1B,EAAoB2B,EAAEnB,EAAqD,IACjFoB,KAAM,SAAcC,GAChB,MAAOA,GEnCnBD,MFqCQE,IAAK,SAAaD,GACd,MAAOA,GErCnBE,gBFuCQC,mBAAoB,SAA4BH,GAC5C,MAAOA,GEtCnBG,sBFyCIC,OExCJ,QFyCIC,SACIC,QAAS,SAAiBC,GACtB,MAAOpC,GAAoB2B,EAAElB,EAA8D,GExCvG2B,IF0CQC,SAAU,SAAkBzB,GACE,GAAtBA,EAAE0B,OAAOC,WACTtB,KExChBuB,cF2CQA,WAAY,WACR,GAAIC,GExChB,EF0CgBA,GAD2B,WAA3BxB,KAAKe,mBEvCrB,SAEA,QF0CYf,KAAKyB,MAAMC,IAAI,gCAAkCC,QACzCtB,EAAGL,KExCvBK,EFyCoBuB,GAAI5B,KAAKa,IExC7Be,GFyCoBJ,KExCpBA,EFyCoBK,MErCpB,UFwCejC,KAAK,SAAUkC,GACd,GAAIC,GEtCpB/B,IFuCoB8B,GAAS1B,OACTJ,KEtCpBK,IFuCoBL,KAAKQ,YAAYwB,QAAQlC,MAAME,KAAKQ,YAAasB,EAAS1B,KAAKA,KEtCnF6B,WFuCoBjC,KAAKkC,UAAU,WACXH,EAAGI,MAAMC,UAAUd,UAAYS,EAAGI,MAAME,OAAOC,aEtCvEnC,EFuCwBA,EAAe4B,EAAGI,MAAME,OEtChDC,oBF4CIC,QAAS,WACLvC,KAAKkC,UAAU,WACXlC,KEpCZuB,kBF2CMiB,GACA,SAAU3D,EAAQC,EAASC,GGjHjCD,EAAAD,EAAAC,QAAAC,EAAA,QAKAD,EAAA2D,MAAA5D,EAAA6B,EAAA,+7DAAw9D,IAAQgC,QAAA,EAAAC,SAAA,8EAAAC,SAAAC,SAAA,25BAAAC,KAAA,mBAAAC,gBAAA,o+EAAmiHC,WAAA,OH0H7/KC,GACA,SAAUpE,EAAQC,EAASC,GI7HjC,GAAAmC,GAAAnC,EAAA,GACA,iBAAAmC,SAAArC,EAAA6B,EAAAQ,EAAA,MACAA,EAAAgC,SAAArE,EAAAC,QAAAoC,EAAAgC,OAEAnE,GAAA,eAAAmC,GAAA,IJsIMiC,GACA,SAAUtE,EAAQC,GK9IxBD,EAAAC,SAAgBsE,OAAA,WAAmB,GAAAC,GAAArD,KAAasD,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,CAC1E,OAAAD,GAAA,KAAAG,EAAA,cACAE,IACAC,MAAA,SAAAC,GACAP,EAAAQ,MAAA,aAGGL,EAAA,OACHM,KAAA,WACGT,EAAAU,GAAA,oBAAAV,EAAAU,GAAA,KAAAP,EAAA,OACHQ,IAAA,YACAC,YAAA,cACAP,IACArB,OAAA,SAAAuB,GACAP,EAAAjC,SAAAwC,KAGAE,KAAA,SACGT,EAAA,YAAAG,EAAA,MACHU,aACAC,KAAA,gBACAC,QAAA,kBACA/E,MAAAgE,EAAA,YACAgB,WAAA,gBAEAL,IAAA,UACGX,EAAAiB,GAAAjB,EAAA,qBAAAkB,GACH,MAAAf,GAAA,MAAAA,EAAA,KACAS,YAAA,SACKT,EAAA,QAAAH,EAAAU,GAAAV,EAAAmB,GAAAD,EAAAE,gBAAApB,EAAAU,GAAA,KAAAP,EAAA,OACLS,YAAA,OACApC,OACA6C,KAAAH,EAAA3C,IAAAyB,EAAA1C,KAAAiB,IAEA+C,OACAC,IAAAvB,EAAA1C,KAAAiB,MAEK4B,EAAA,OACLS,YAAA,SACAU,OACAE,MAAA,KACAC,OAAA,KACAC,IAAAR,EAAA3C,IAAAyB,EAAA1C,KAAAiB,GAAAyB,EAAA1C,KAAAqE,IAAAT,EAAAU,UAEK5B,EAAAU,GAAA,KAAAP,EAAA,OACLS,YAAA,OACAiB,UACAC,UAAA9B,EAAAmB,GAAAnB,EAAAnC,QAAAqD,EAAArD,oBAGGmC,EAAA+B,SAAA/B,EAAA+B,MACFC","file":"chatStatic/js/0.a0ec0067e16fad2382ca.js","sourcesContent":["webpackJsonp([0],{\n\n/***/ 10:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(68)\n\nvar Component = __webpack_require__(2)(\n  /* script */\n  __webpack_require__(64),\n  /* template */\n  __webpack_require__(72),\n  /* scopeId */\n  \"data-v-0e6a421e\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 64:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_vue_resource__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__messageHandel__ = __webpack_require__(3);\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].component('asyncModal', function (resolve) {\n    __webpack_require__.e/* require */(4).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(71)]; (resolve.apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__));}.bind(this)).catch(__webpack_require__.oe);\n});\n\nvar scrollHeight = 0;\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    data: function data() {\n        return {\n            p: 1,\n            showModal: this.show,\n            messagesLog: [],\n            scrollHeight: 0\n        };\n    },\n\n    computed: __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"b\" /* mapState */])({\n        user: function user(state) {\n            return state.user;\n        },\n        dig: function dig(state) {\n            return state.currentSession;\n        },\n        currentSessionType: function currentSessionType(state) {\n            return state.currentSessionType;\n        }\n    }),\n    props: ['show'],\n    methods: {\n        content: function content(_content) {\n            return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__messageHandel__[\"a\" /* reverse */])(_content);\n        },\n        loadMroe: function loadMroe(e) {\n            if (e.target.scrollTop == 0) {\n                this.getMessage();\n            }\n        },\n        getMessage: function getMessage() {\n            var type = '';\n            if (this.currentSessionType == 'message') {\n                type = 'friend';\n            } else {\n                type = 'group';\n            }\n            this.$http.get('/omsIm/demo/json/getList.php', { params: {\n                    p: this.p,\n                    id: this.dig.id,\n                    type: type,\n                    class: 'page'\n\n                }\n            }).then(function (response) {\n                var vm = this;\n                if (response.data) {\n                    this.p++;\n                    this.messagesLog.unshift.apply(this.messagesLog, response.data.data.reverse());\n                    this.$nextTick(function () {\n                        vm.$refs.scrollBox.scrollTop = vm.$refs.scroll.offsetHeight - scrollHeight;\n                        scrollHeight = vm.$refs.scroll.offsetHeight;\n                    });\n                }\n            });\n        }\n    },\n    created: function created() {\n        this.$nextTick(function () {\n            this.getMessage();\n        });\n    }\n});\n\n/***/ }),\n\n/***/ 65:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(60)(true);\n// imports\n\n\n// module\nexports.push([module.i, \".message-log[data-v-0e6a421e]{padding:5px;overflow:auto;height:400px}.message-log ul[data-v-0e6a421e]::-webkit-scrollbar{width:100px;display:block;width:10px;height:10px}.message-log ul[data-v-0e6a421e]::-webkit-scrollbar-track{background:transparent}.message-log ul[data-v-0e6a421e]::-webkit-scrollbar-thumb{background:rgba(0,0,0,.5);border-radius:10px}.message-log ul[data-v-0e6a421e]::-webkit-scrollbar-corner{background:#82afff}.message-log ul[data-v-0e6a421e]::-webkit-scrollbar-resizer{background:#ff0bee}.message-log ul[data-v-0e6a421e]::scrollbar{width:100px;display:block;width:10px;height:10px}.message-log ul[data-v-0e6a421e]::scrollbar-track{background:transparent}.message-log ul[data-v-0e6a421e]::scrollbar-thumb{background:rgba(0,0,0,.5);border-radius:10px}.message-log ul[data-v-0e6a421e]::scrollbar-corner{background:#82afff}.message-log ul[data-v-0e6a421e]::scrollbar-resizer{background:#ff0bee}.message-log li[data-v-0e6a421e]{margin-bottom:15px}.message-log .time[data-v-0e6a421e]{margin:7px 0;text-align:center}.message-log .time>span[data-v-0e6a421e]{display:inline-block;padding:0 18px;font-size:12px;color:#fff;border-radius:2px;background-color:#dcdcdc}.message-log .avatar[data-v-0e6a421e]{float:left;margin:0 10px 0 0;border-radius:3px}.message-log .text[data-v-0e6a421e]{display:inline-block;position:relative;padding:0 10px;max-width:calc(100% - 80px);min-height:30px;line-height:2.5;font-size:12px;text-align:left;word-break:break-all;background-color:#fafafa;border-radius:4px}.message-log .text[data-v-0e6a421e]:before{content:\\\" \\\";position:absolute;top:9px;right:100%;border:6px solid transparent;border-right-color:#fafafa}.message-log .self[data-v-0e6a421e]{text-align:right}.message-log .self .avatar[data-v-0e6a421e]{float:right;margin:0 0 0 10px}.message-log .self .text[data-v-0e6a421e]{background-color:#b2e281}.message-log .self .text[data-v-0e6a421e]:before{right:inherit;left:100%;border-right-color:transparent;border-left-color:#b2e281}\", \"\", {\"version\":3,\"sources\":[\"/Library/WebServer/Documents/vue-chat1.0.0/src/components/modalMessage.vue\"],\"names\":[],\"mappings\":\"AACA,8BACE,YAAa,AACb,cAAe,AACf,YAAc,CACf,AACD,oDACE,YAAc,AACd,cAAe,AAGf,WAAY,AACZ,WAAa,CAHd,AAKD,0DACE,sBAA6B,CAC9B,AACD,0DACE,0BAA+B,AAC/B,kBAAoB,CACrB,AACD,2DACE,kBAAoB,CACrB,AACD,4DACE,kBAAoB,CACrB,AACD,4CACE,YAAc,AACd,cAAe,AAGf,WAAY,AACZ,WAAa,CAHd,AAKD,kDACE,sBAA6B,CAC9B,AACD,kDACE,0BAA+B,AAC/B,kBAAoB,CACrB,AACD,mDACE,kBAAoB,CACrB,AACD,oDACE,kBAAoB,CACrB,AACD,iCACE,kBAAoB,CACrB,AACD,oCACE,aAAc,AACd,iBAAmB,CACpB,AACD,yCACE,qBAAsB,AACtB,eAAgB,AAChB,eAAgB,AAChB,WAAY,AACZ,kBAAmB,AACnB,wBAA0B,CAC3B,AACD,sCACE,WAAY,AACZ,kBAAmB,AACnB,iBAAmB,CACpB,AACD,oCACE,qBAAsB,AACtB,kBAAmB,AACnB,eAAgB,AAChB,4BAA6B,AAC7B,gBAAiB,AACjB,gBAAiB,AACjB,eAAgB,AAChB,gBAAiB,AACjB,qBAAsB,AACtB,yBAA0B,AAC1B,iBAAmB,CACpB,AACD,2CACE,YAAa,AACb,kBAAmB,AACnB,QAAS,AACT,WAAY,AACZ,6BAA8B,AAC9B,0BAA4B,CAC7B,AACD,oCACE,gBAAkB,CACnB,AACD,4CACE,YAAa,AACb,iBAAmB,CACpB,AACD,0CACE,wBAA0B,CAC3B,AACD,iDACE,cAAe,AACf,UAAW,AACX,+BAAgC,AAChC,yBAA2B,CAC5B\",\"file\":\"modalMessage.vue\",\"sourcesContent\":[\"\\n.message-log[data-v-0e6a421e] {\\n  padding: 5px;\\n  overflow: auto;\\n  height: 400px;\\n}\\n.message-log ul[data-v-0e6a421e]::-webkit-scrollbar {\\n  width: 100px ;\\n  display: block;\\n}\\n.message-log ul[data-v-0e6a421e]::-webkit-scrollbar {\\n  width: 10px;\\n  height: 10px;\\n}\\n.message-log ul[data-v-0e6a421e]::-webkit-scrollbar-track {\\n  background: rgba(0, 0, 0, 0);\\n}\\n.message-log ul[data-v-0e6a421e]::-webkit-scrollbar-thumb {\\n  background: rgba(0, 0, 0, 0.5);\\n  border-radius: 10px;\\n}\\n.message-log ul[data-v-0e6a421e]::-webkit-scrollbar-corner {\\n  background: #82afff;\\n}\\n.message-log ul[data-v-0e6a421e]::-webkit-scrollbar-resizer {\\n  background: #ff0bee;\\n}\\n.message-log ul[data-v-0e6a421e]::scrollbar {\\n  width: 100px ;\\n  display: block;\\n}\\n.message-log ul[data-v-0e6a421e]::scrollbar {\\n  width: 10px;\\n  height: 10px;\\n}\\n.message-log ul[data-v-0e6a421e]::scrollbar-track {\\n  background: rgba(0, 0, 0, 0);\\n}\\n.message-log ul[data-v-0e6a421e]::scrollbar-thumb {\\n  background: rgba(0, 0, 0, 0.5);\\n  border-radius: 10px;\\n}\\n.message-log ul[data-v-0e6a421e]::scrollbar-corner {\\n  background: #82afff;\\n}\\n.message-log ul[data-v-0e6a421e]::scrollbar-resizer {\\n  background: #ff0bee;\\n}\\n.message-log li[data-v-0e6a421e] {\\n  margin-bottom: 15px;\\n}\\n.message-log .time[data-v-0e6a421e] {\\n  margin: 7px 0;\\n  text-align: center;\\n}\\n.message-log .time > span[data-v-0e6a421e] {\\n  display: inline-block;\\n  padding: 0 18px;\\n  font-size: 12px;\\n  color: #fff;\\n  border-radius: 2px;\\n  background-color: #dcdcdc;\\n}\\n.message-log .avatar[data-v-0e6a421e] {\\n  float: left;\\n  margin: 0 10px 0 0;\\n  border-radius: 3px;\\n}\\n.message-log .text[data-v-0e6a421e] {\\n  display: inline-block;\\n  position: relative;\\n  padding: 0 10px;\\n  max-width: calc(100% - 80px);\\n  min-height: 30px;\\n  line-height: 2.5;\\n  font-size: 12px;\\n  text-align: left;\\n  word-break: break-all;\\n  background-color: #fafafa;\\n  border-radius: 4px;\\n}\\n.message-log .text[data-v-0e6a421e]:before {\\n  content: \\\" \\\";\\n  position: absolute;\\n  top: 9px;\\n  right: 100%;\\n  border: 6px solid transparent;\\n  border-right-color: #fafafa;\\n}\\n.message-log .self[data-v-0e6a421e] {\\n  text-align: right;\\n}\\n.message-log .self .avatar[data-v-0e6a421e] {\\n  float: right;\\n  margin: 0 0 0 10px;\\n}\\n.message-log .self .text[data-v-0e6a421e] {\\n  background-color: #b2e281;\\n}\\n.message-log .self .text[data-v-0e6a421e]:before {\\n  right: inherit;\\n  left: 100%;\\n  border-right-color: transparent;\\n  border-left-color: #b2e281;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 68:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(65);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(61)(\"1e79679c\", content, true);\n\n/***/ }),\n\n/***/ 72:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return (_vm.show) ? _c('asyncModal', {\n    on: {\n      \"close\": function($event) {\n        _vm.$emit('close')\n      }\n    }\n  }, [_c('div', {\n    slot: \"header\"\n  }, [_vm._v(\"\\n\\t\\t聊天记录\\n\\t\")]), _vm._v(\" \"), _c('div', {\n    ref: \"scrollBox\",\n    staticClass: \"message-log\",\n    on: {\n      \"scroll\": function($event) {\n        _vm.loadMroe($event)\n      }\n    },\n    slot: \"body\"\n  }, [(_vm.messagesLog) ? _c('ul', {\n    directives: [{\n      name: \"scroll-bottom\",\n      rawName: \"v-scroll-bottom\",\n      value: (_vm.messagesLog),\n      expression: \"messagesLog\"\n    }],\n    ref: \"scroll\"\n  }, _vm._l((_vm.messagesLog), function(item) {\n    return _c('li', [_c('p', {\n      staticClass: \"time\"\n    }, [_c('span', [_vm._v(_vm._s(item.timestamp))])]), _vm._v(\" \"), _c('div', {\n      staticClass: \"main\",\n      class: {\n        self: item.id == _vm.user.id\n      },\n      attrs: {\n        \"idt\": _vm.user.id\n      }\n    }, [_c('img', {\n      staticClass: \"avatar\",\n      attrs: {\n        \"width\": \"30\",\n        \"height\": \"30\",\n        \"src\": item.id == _vm.user.id ? _vm.user.img : item.avatar\n      }\n    }), _vm._v(\" \"), _c('div', {\n      staticClass: \"text\",\n      domProps: {\n        \"innerHTML\": _vm._s(_vm.content(item.content))\n      }\n    })])])\n  })) : _vm._e()])]) : _vm._e()\n},staticRenderFns: []}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// chatStatic/js/0.a0ec0067e16fad2382ca.js","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-0e6a421e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./modalMessage.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./modalMessage.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0e6a421e\\\"}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./modalMessage.vue\"),\n  /* scopeId */\n  \"data-v-0e6a421e\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/modalMessage.vue\n// module id = 10\n// module chunks = 0","<script>\r\nimport\tVue from 'vue';\r\nimport\t{ mapState } from 'vuex';\r\nimport vueR from 'vue-resource';\r\nimport { reverse } from '../messageHandel';\r\nVue.component('asyncModal', function (resolve) {\r\n  require(['./modal'], resolve)\r\n})\r\n\r\nlet scrollHeight = 0;\r\n\r\nexport default {\r\n\tdata () {\r\n\t\treturn {\r\n\t\t\tp: 1,\r\n\t\t\tshowModal: this.show,\r\n\t\t\tmessagesLog: [],\r\n            scrollHeight: 0,\r\n\t\t}\r\n\t},\r\n\tcomputed: mapState({\r\n\t\tuser: (state) => state.user,\r\n\t\tdig: (state) => state.currentSession,\r\n        currentSessionType: (state) => state.currentSessionType\r\n\t}),\r\n\tprops: ['show'],\r\n\tmethods: {\r\n        content ( content ) {\r\n            return reverse(content);\r\n        },\r\n        loadMroe (e) {\r\n            if ( e.target.scrollTop == 0 ) {\r\n                this.getMessage();\r\n            }\r\n        },\r\n        getMessage () {\r\n            let type = '';\r\n            if(this.currentSessionType == 'message') {\r\n                type = 'friend';\r\n            } else {\r\n                type = 'group';\r\n            }\r\n            this.$http.get('/omsIm/demo/json/getList.php', {params: {\r\n                    p: this.p,\r\n                    id: this.dig.id,\r\n                    type: type,\r\n                    class: 'page'\r\n\r\n                }\r\n            })\r\n            .then(function (response) {\r\n                // console.log(response);return;\r\n                let vm = this;\r\n                if ( response.data ) {\r\n                    this.p ++;\r\n                    this.messagesLog.unshift.apply(this.messagesLog, response.data.data.reverse());\r\n                    this.$nextTick(function () {\r\n                        vm.$refs.scrollBox.scrollTop = vm.$refs.scroll.offsetHeight - scrollHeight;\r\n                        scrollHeight = vm.$refs.scroll.offsetHeight;\r\n                    })\r\n                }\r\n                \r\n            });\r\n        }\r\n    },\r\n\tcreated () {\r\n        this.$nextTick(function () {\r\n           this.getMessage();\r\n\r\n        })\r\n\t}\r\n}\r\n\r\n</script>\r\n<template>\r\n\t<asyncModal v-if=\"show\" @close=\"$emit('close')\">\r\n\t\t<div slot=\"header\">\r\n\t\t\t聊天记录\r\n\t\t</div>\r\n\t\t<div slot=\"body\" ref=\"scrollBox\" @scroll=\"loadMroe($event)\"  class=\"message-log\">\r\n\t\t    <ul v-if=\"messagesLog\" ref=\"scroll\" v-scroll-bottom=\"messagesLog\">\r\n\t\t        <li v-for=\"item in messagesLog\">\r\n\t\t            <p class=\"time\">\r\n\t\t                <span>{{ item.timestamp}}</span>\r\n\t\t            </p>\r\n\t\t            <div class=\"main\" :idt=\"user.id\" :class=\"{ self: item.id == user.id  }\">\r\n\t\t                <img class=\"avatar\" width=\"30\" height=\"30\" :src=\"item.id == user.id ? user.img : item.avatar\" />\r\n\t\t                <div class=\"text\" v-html=\"content(item.content)\"></div>\r\n\t\t            </div>\r\n\t\t        </li>\r\n\t\t    </ul>\r\n\t\t</div>\r\n\t</asyncModal>\r\n</template>\r\n<style lang=\"less\" scoped>\r\n.message-log{\r\n    padding: 5px;\r\n    overflow: auto;\r\n    height: 400px;\r\n    ul {\r\n        &::-webkit-scrollbar{width:100px ;display: block;}\r\n        &::-webkit-scrollbar{width:10px;height:10px}\r\n        &::-webkit-scrollbar-track{background:rgba(0,0,0,0)}\r\n        &::-webkit-scrollbar-thumb{background:rgba(0,0,0,0.5);border-radius:10px}\r\n        &::-webkit-scrollbar-corner{background:#82afff}\r\n        &::-webkit-scrollbar-resizer{background:#ff0bee}\r\n        &::scrollbar{width:100px ;display: block;}\r\n        &::scrollbar{width:10px;height:10px}\r\n\r\n        &::scrollbar-track{background:rgba(0,0,0,0)}\r\n        &::scrollbar-thumb{background:rgba(0,0,0,0.5);border-radius:10px}\r\n        &::scrollbar-corner{background:#82afff}\r\n        &::scrollbar-resizer{background:#ff0bee}\r\n    }\r\n\r\n    li {\r\n        margin-bottom: 15px;\r\n    }\r\n    .time {\r\n        margin: 7px 0;\r\n        text-align: center;\r\n\r\n        > span {\r\n            display: inline-block;\r\n            padding: 0 18px;\r\n            font-size: 12px;\r\n            color: #fff;\r\n            border-radius: 2px;\r\n            background-color: #dcdcdc;\r\n        }\r\n    }\r\n    .avatar {\r\n        float: left;\r\n        margin: 0 10px 0 0;\r\n        border-radius: 3px;\r\n    }\r\n    .text {\r\n        display: inline-block;\r\n        position: relative;\r\n        padding: 0 10px;\r\n        max-width: ~'calc(100% - 80px)';\r\n        min-height: 30px;\r\n        line-height: 2.5;\r\n        font-size: 12px;\r\n        text-align: left;\r\n        word-break: break-all;\r\n        background-color: #fafafa;\r\n        border-radius: 4px;\r\n        &:before {\r\n            content: \" \";\r\n            position: absolute;\r\n            top: 9px;\r\n            right: 100%;\r\n            border: 6px solid transparent;\r\n            border-right-color: #fafafa;\r\n        }\r\n    }\r\n\r\n    .self {\r\n        text-align: right;\r\n\r\n        .avatar {\r\n            float: right;\r\n            margin: 0 0 0 10px;\r\n        }\r\n        .text {\r\n            background-color: #b2e281;\r\n\r\n            &:before {\r\n                right: inherit;\r\n                left: 100%;\r\n                border-right-color: transparent;\r\n                border-left-color: #b2e281;\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// modalMessage.vue?3dc79510","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".message-log[data-v-0e6a421e]{padding:5px;overflow:auto;height:400px}.message-log ul[data-v-0e6a421e]::-webkit-scrollbar{width:100px;display:block;width:10px;height:10px}.message-log ul[data-v-0e6a421e]::-webkit-scrollbar-track{background:transparent}.message-log ul[data-v-0e6a421e]::-webkit-scrollbar-thumb{background:rgba(0,0,0,.5);border-radius:10px}.message-log ul[data-v-0e6a421e]::-webkit-scrollbar-corner{background:#82afff}.message-log ul[data-v-0e6a421e]::-webkit-scrollbar-resizer{background:#ff0bee}.message-log ul[data-v-0e6a421e]::scrollbar{width:100px;display:block;width:10px;height:10px}.message-log ul[data-v-0e6a421e]::scrollbar-track{background:transparent}.message-log ul[data-v-0e6a421e]::scrollbar-thumb{background:rgba(0,0,0,.5);border-radius:10px}.message-log ul[data-v-0e6a421e]::scrollbar-corner{background:#82afff}.message-log ul[data-v-0e6a421e]::scrollbar-resizer{background:#ff0bee}.message-log li[data-v-0e6a421e]{margin-bottom:15px}.message-log .time[data-v-0e6a421e]{margin:7px 0;text-align:center}.message-log .time>span[data-v-0e6a421e]{display:inline-block;padding:0 18px;font-size:12px;color:#fff;border-radius:2px;background-color:#dcdcdc}.message-log .avatar[data-v-0e6a421e]{float:left;margin:0 10px 0 0;border-radius:3px}.message-log .text[data-v-0e6a421e]{display:inline-block;position:relative;padding:0 10px;max-width:calc(100% - 80px);min-height:30px;line-height:2.5;font-size:12px;text-align:left;word-break:break-all;background-color:#fafafa;border-radius:4px}.message-log .text[data-v-0e6a421e]:before{content:\\\" \\\";position:absolute;top:9px;right:100%;border:6px solid transparent;border-right-color:#fafafa}.message-log .self[data-v-0e6a421e]{text-align:right}.message-log .self .avatar[data-v-0e6a421e]{float:right;margin:0 0 0 10px}.message-log .self .text[data-v-0e6a421e]{background-color:#b2e281}.message-log .self .text[data-v-0e6a421e]:before{right:inherit;left:100%;border-right-color:transparent;border-left-color:#b2e281}\", \"\", {\"version\":3,\"sources\":[\"/Library/WebServer/Documents/vue-chat1.0.0/src/components/modalMessage.vue\"],\"names\":[],\"mappings\":\"AACA,8BACE,YAAa,AACb,cAAe,AACf,YAAc,CACf,AACD,oDACE,YAAc,AACd,cAAe,AAGf,WAAY,AACZ,WAAa,CAHd,AAKD,0DACE,sBAA6B,CAC9B,AACD,0DACE,0BAA+B,AAC/B,kBAAoB,CACrB,AACD,2DACE,kBAAoB,CACrB,AACD,4DACE,kBAAoB,CACrB,AACD,4CACE,YAAc,AACd,cAAe,AAGf,WAAY,AACZ,WAAa,CAHd,AAKD,kDACE,sBAA6B,CAC9B,AACD,kDACE,0BAA+B,AAC/B,kBAAoB,CACrB,AACD,mDACE,kBAAoB,CACrB,AACD,oDACE,kBAAoB,CACrB,AACD,iCACE,kBAAoB,CACrB,AACD,oCACE,aAAc,AACd,iBAAmB,CACpB,AACD,yCACE,qBAAsB,AACtB,eAAgB,AAChB,eAAgB,AAChB,WAAY,AACZ,kBAAmB,AACnB,wBAA0B,CAC3B,AACD,sCACE,WAAY,AACZ,kBAAmB,AACnB,iBAAmB,CACpB,AACD,oCACE,qBAAsB,AACtB,kBAAmB,AACnB,eAAgB,AAChB,4BAA6B,AAC7B,gBAAiB,AACjB,gBAAiB,AACjB,eAAgB,AAChB,gBAAiB,AACjB,qBAAsB,AACtB,yBAA0B,AAC1B,iBAAmB,CACpB,AACD,2CACE,YAAa,AACb,kBAAmB,AACnB,QAAS,AACT,WAAY,AACZ,6BAA8B,AAC9B,0BAA4B,CAC7B,AACD,oCACE,gBAAkB,CACnB,AACD,4CACE,YAAa,AACb,iBAAmB,CACpB,AACD,0CACE,wBAA0B,CAC3B,AACD,iDACE,cAAe,AACf,UAAW,AACX,+BAAgC,AAChC,yBAA2B,CAC5B\",\"file\":\"modalMessage.vue\",\"sourcesContent\":[\"\\n.message-log[data-v-0e6a421e] {\\n  padding: 5px;\\n  overflow: auto;\\n  height: 400px;\\n}\\n.message-log ul[data-v-0e6a421e]::-webkit-scrollbar {\\n  width: 100px ;\\n  display: block;\\n}\\n.message-log ul[data-v-0e6a421e]::-webkit-scrollbar {\\n  width: 10px;\\n  height: 10px;\\n}\\n.message-log ul[data-v-0e6a421e]::-webkit-scrollbar-track {\\n  background: rgba(0, 0, 0, 0);\\n}\\n.message-log ul[data-v-0e6a421e]::-webkit-scrollbar-thumb {\\n  background: rgba(0, 0, 0, 0.5);\\n  border-radius: 10px;\\n}\\n.message-log ul[data-v-0e6a421e]::-webkit-scrollbar-corner {\\n  background: #82afff;\\n}\\n.message-log ul[data-v-0e6a421e]::-webkit-scrollbar-resizer {\\n  background: #ff0bee;\\n}\\n.message-log ul[data-v-0e6a421e]::scrollbar {\\n  width: 100px ;\\n  display: block;\\n}\\n.message-log ul[data-v-0e6a421e]::scrollbar {\\n  width: 10px;\\n  height: 10px;\\n}\\n.message-log ul[data-v-0e6a421e]::scrollbar-track {\\n  background: rgba(0, 0, 0, 0);\\n}\\n.message-log ul[data-v-0e6a421e]::scrollbar-thumb {\\n  background: rgba(0, 0, 0, 0.5);\\n  border-radius: 10px;\\n}\\n.message-log ul[data-v-0e6a421e]::scrollbar-corner {\\n  background: #82afff;\\n}\\n.message-log ul[data-v-0e6a421e]::scrollbar-resizer {\\n  background: #ff0bee;\\n}\\n.message-log li[data-v-0e6a421e] {\\n  margin-bottom: 15px;\\n}\\n.message-log .time[data-v-0e6a421e] {\\n  margin: 7px 0;\\n  text-align: center;\\n}\\n.message-log .time > span[data-v-0e6a421e] {\\n  display: inline-block;\\n  padding: 0 18px;\\n  font-size: 12px;\\n  color: #fff;\\n  border-radius: 2px;\\n  background-color: #dcdcdc;\\n}\\n.message-log .avatar[data-v-0e6a421e] {\\n  float: left;\\n  margin: 0 10px 0 0;\\n  border-radius: 3px;\\n}\\n.message-log .text[data-v-0e6a421e] {\\n  display: inline-block;\\n  position: relative;\\n  padding: 0 10px;\\n  max-width: calc(100% - 80px);\\n  min-height: 30px;\\n  line-height: 2.5;\\n  font-size: 12px;\\n  text-align: left;\\n  word-break: break-all;\\n  background-color: #fafafa;\\n  border-radius: 4px;\\n}\\n.message-log .text[data-v-0e6a421e]:before {\\n  content: \\\" \\\";\\n  position: absolute;\\n  top: 9px;\\n  right: 100%;\\n  border: 6px solid transparent;\\n  border-right-color: #fafafa;\\n}\\n.message-log .self[data-v-0e6a421e] {\\n  text-align: right;\\n}\\n.message-log .self .avatar[data-v-0e6a421e] {\\n  float: right;\\n  margin: 0 0 0 10px;\\n}\\n.message-log .self .text[data-v-0e6a421e] {\\n  background-color: #b2e281;\\n}\\n.message-log .self .text[data-v-0e6a421e]:before {\\n  right: inherit;\\n  left: 100%;\\n  border-right-color: transparent;\\n  border-left-color: #b2e281;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-0e6a421e\",\"scoped\":true,\"hasInlineConfig\":false}!./~/less-loader/dist?{\"sourceMap\":true}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/modalMessage.vue\n// module id = 65\n// module chunks = 0","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-0e6a421e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/less-loader/dist/index.js?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./modalMessage.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"1e79679c\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-0e6a421e\",\"scoped\":true,\"hasInlineConfig\":false}!./~/less-loader/dist?{\"sourceMap\":true}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/components/modalMessage.vue\n// module id = 68\n// module chunks = 0","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return (_vm.show) ? _c('asyncModal', {\n    on: {\n      \"close\": function($event) {\n        _vm.$emit('close')\n      }\n    }\n  }, [_c('div', {\n    slot: \"header\"\n  }, [_vm._v(\"\\n\\t\\t聊天记录\\n\\t\")]), _vm._v(\" \"), _c('div', {\n    ref: \"scrollBox\",\n    staticClass: \"message-log\",\n    on: {\n      \"scroll\": function($event) {\n        _vm.loadMroe($event)\n      }\n    },\n    slot: \"body\"\n  }, [(_vm.messagesLog) ? _c('ul', {\n    directives: [{\n      name: \"scroll-bottom\",\n      rawName: \"v-scroll-bottom\",\n      value: (_vm.messagesLog),\n      expression: \"messagesLog\"\n    }],\n    ref: \"scroll\"\n  }, _vm._l((_vm.messagesLog), function(item) {\n    return _c('li', [_c('p', {\n      staticClass: \"time\"\n    }, [_c('span', [_vm._v(_vm._s(item.timestamp))])]), _vm._v(\" \"), _c('div', {\n      staticClass: \"main\",\n      class: {\n        self: item.id == _vm.user.id\n      },\n      attrs: {\n        \"idt\": _vm.user.id\n      }\n    }, [_c('img', {\n      staticClass: \"avatar\",\n      attrs: {\n        \"width\": \"30\",\n        \"height\": \"30\",\n        \"src\": item.id == _vm.user.id ? _vm.user.img : item.avatar\n      }\n    }), _vm._v(\" \"), _c('div', {\n      staticClass: \"text\",\n      domProps: {\n        \"innerHTML\": _vm._s(_vm.content(item.content))\n      }\n    })])])\n  })) : _vm._e()])]) : _vm._e()\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-0e6a421e\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/modalMessage.vue\n// module id = 72\n// module chunks = 0"],"sourceRoot":""}